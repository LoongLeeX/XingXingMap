// Prisma Schema - 双环境配置
// 本地开发: SQLite (简单快速)
// Vercel 生产: PostgreSQL (通过 DATABASE_URL 自动检测)

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

// 标记表
model Marker {
  id          String   @id @default(cuid())
  title       String
  description String?
  latitude    Float
  longitude   Float
  images      String   @default("")  // SQLite 使用 JSON 字符串
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@index([latitude, longitude])
  @@map("markers")
}

// 未来可能需要的表

// 用户表 (如果需要认证)
// model User {
//   id        String   @id @default(cuid())
//   email     String   @unique
//   name      String?
//   password  String
//   markers   Marker[] @relation("UserMarkers")
//   createdAt DateTime @default(now())
//   updatedAt DateTime @updatedAt
//   @@map("users")
// }

// 标记分类表 (未来扩展)
// model Category {
//   id        String   @id @default(cuid())
//   name      String   @unique
//   color     String?
//   markers   Marker[] @relation("CategoryMarkers")
//   createdAt DateTime @default(now())
//   @@map("categories")
// }

